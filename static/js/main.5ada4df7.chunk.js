(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,a,t){},13:function(e,a,t){},14:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(2),s=t.n(r);t(12),t(13);const i=e=>{if(console.log("Parsing datetime string:",e),!e)return null;try{const t=e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})\.(\d{3})/);if(!t)return console.error("Invalid datetime format:",e),null;const[,n,l,r,s,i,c,o]=t,m=new Date(Date.UTC(parseInt(n),parseInt(l)-1,parseInt(r),parseInt(s),parseInt(i),parseInt(c),parseInt(o)));return console.log("Parsed date:",m),m}catch(a){return console.error("Error parsing datetime:",e,a),null}},c=e=>{const a=(new DOMParser).parseFromString(e,"text/xml");if(a.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML format in tracer file");const t=e=>{const a=e.getElementsByTagName("DateTime")[0];console.log("DateTime element:",a);const t=a?a.textContent.trim():null;return console.log("DateTime content:",t),t},n=Array.from(a.getElementsByTagName("TraceEvent")),l=(e=>{const a=t(e);return a?i(a).getTime():Date.now()})(n[0]),r={},s=[];n.forEach(e=>{var a;const n=e.getAttribute("name")||"",c=e.getAttribute("keyname")||n,o=e.getAttribute("stepMethod")||"",m=e.getAttribute("eventType")||"",d=e.getAttribute("sequence")||"",u=c,p=(e=>{const a=e.getElementsByTagName("Interaction")[0];return a?a.textContent:"Unknown"})(e),g=t(e),E=null===(a=i(g))||void 0===a?void 0:a.getTime(),h=E?(E-l)/1e3:0,v=o.includes("Begin")||m.includes("Begin")||n.includes("Data Page")&&o.includes("Load Begin"),f=o.includes("End")||m.includes("End")||n.includes("Data Page")&&o.includes("Load End");if(!n.includes("Data Page")||!o.includes("instance found")&&!o.includes("is fresh"))if(v){const e={name:u,startSequence:d,endSequence:null,children:[],interaction:p,startTime:h,startTimeMs:E,endTime:null,endTimeMs:null,stepMethod:o,eventType:m,rawDateTime:g};s.length>0?s[s.length-1].children.push(e):(r[p]||(r[p]={name:`Interaction ${p}`,children:[],interaction:p,startTime:h,startTimeMs:E,startSequence:d,endSequence:null,rawDateTime:g}),r[p].children.push(e)),s.push(e)}else if(f&&s.length>0&&s[s.length-1].name===u){const e=s.pop();if(e.endTime=h,e.endTimeMs=E,e.duration=(e.endTimeMs-e.startTimeMs)/1e3,e.endSequence=d,0===s.length){const a=r[e.interaction];a&&(a.endTime=h,a.endTimeMs=E,a.duration=(a.endTimeMs-a.startTimeMs)/1e3,a.endSequence=d)}}});const c=Object.values(r).sort((e,a)=>e.startTime-a.startTime);return console.log("First interaction group:",c[0]),console.log("Last interaction group:",c[c.length-1]),c},o=e=>{if(!e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,a)).toFixed(2))} ${["Bytes","KB","MB","GB"][a]}`},m=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",d=e=>{if(!e)return"";const a=i(e);if(!a)return"";try{const n=a.toLocaleDateString([],{month:"2-digit",day:"2-digit",year:"numeric"}),r=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),s="GMT+1";return l.a.createElement(l.a.Fragment,null,n,l.a.createElement("br",null),r,l.a.createElement("br",null),l.a.createElement("span",{className:"timezone"},s))}catch(t){return console.error("Error formatting datetime:",e,t),""}};const u=e=>{var a;let{node:t,level:r=0,siblings:s=[],rootTotalDuration:i,hideMinorEvents:c,significanceThreshold:o,expandedNodes:m,setExpandedNodes:d}=e;const p=t===s.reduce((e,a)=>a.duration>((null===e||void 0===e?void 0:e.duration)||0)?a:e,null),[g,E]=Object(n.useState)(()=>m.has(t.startSequence));Object(n.useEffect)(()=>{E(m.has(t.startSequence))},[m,t.startSequence]);const h=t.children&&t.children.length>0,v=t.duration||0,f=s.reduce((e,a)=>e+(a.duration||0),0),b=e=>e>=30?"percentage-high":e>=10?"percentage-medium":e>=3?"percentage-low":"percentage-minimal",N=f>0?v/f*100:0,T=i>0?v/i*100:0;if(c&&N<o)return null;const y=null===(a=t.children)||void 0===a?void 0:a.filter(e=>{const a=e.duration||0;return(v>0?a/v*100:0)<o});return l.a.createElement("div",{className:`activity-group ${p?"max-duration-path":""}`},l.a.createElement("div",{className:"activity-header"},h&&l.a.createElement("span",{className:"expand-icon",onClick:()=>{const e=new Set(m);g?e.delete(t.startSequence):e.add(t.startSequence),d(e)}},g?"\u25bc":"\u25b6"),l.a.createElement("div",{className:"activity-title"},l.a.createElement("span",{className:"activity-name"},t.name||"Unknown Activity",(t.startSequence||t.endSequence)&&l.a.createElement("span",{className:"sequence-number",title:"Start and end sequence numbers"},` (#${t.startSequence}\u2192${t.endSequence||"?"})`)),void 0!==t.duration&&l.a.createElement("span",{className:"activity-time"},` (${t.duration.toFixed(3)}s`,v>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:`percentage-value ${b(N)}`},` - ${N.toFixed(1)}% of parent`),l.a.createElement("span",{className:`percentage-value ${b(T)}`},` | ${T.toFixed(1)}% of total`)),")"))),g&&h&&l.a.createElement("div",{className:"children",style:{marginLeft:"20px"}},c&&y.length>0&&l.a.createElement("div",{className:"hidden-events-notice"},y.length," minor event",y.length>1?"s":""," hidden"),t.children.map((e,a)=>l.a.createElement(u,{key:`${e.name}-${a}`,node:e,level:r+1,siblings:t.children,rootTotalDuration:i,hideMinorEvents:c,significanceThreshold:o,expandedNodes:m,setExpandedNodes:d}))))};var p=function(){var e;const[a,t]=Object(n.useState)([]),[r,s]=Object(n.useState)(null),[i,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,v]=Object(n.useState)(!1),[f,b]=Object(n.useState)(3),[N,T]=Object(n.useState)({tracer:!1}),[y,S]=Object(n.useState)(null),[w,x]=Object(n.useState)(new Set),M=a.reduce((e,a)=>e+(a.duration||0),0),D=a.filter(e=>(M>0?e.duration/M*100:0)<f),q=h?a.filter(e=>(M>0?e.duration/M*100:0)>=f):a;return l.a.createElement(l.a.Fragment,null,a.length>0&&l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"sidebar-header"},"Visualization Controls"),l.a.createElement("div",{className:"sidebar-section"},l.a.createElement("div",{className:"sidebar-section-title"},"File"),l.a.createElement("div",{className:"sidebar-buttons"},l.a.createElement("button",{className:"btn btn-danger",onClick:()=>{t([]),s(null),p(null),E(!1),T({tracer:!1}),S(null),x(new Set),v(!1)}},l.a.createElement("span",{role:"img","aria-label":"delete"},"\ud83d\uddd1\ufe0f")," Clear Results")),r&&l.a.createElement("div",{className:"file-metadata"},l.a.createElement("div",{className:"metadata-item"},l.a.createElement("span",{className:"metadata-label"},"Interactions:"),l.a.createElement("span",{className:"metadata-value"},a.length)),l.a.createElement("div",{className:"metadata-item"},l.a.createElement("span",{className:"metadata-label"},"Size:"),l.a.createElement("span",{className:"metadata-value"},o(r.length))),l.a.createElement("div",{className:"metadata-item"},l.a.createElement("span",{className:"metadata-label"},"Uploaded:"),l.a.createElement("span",{className:"metadata-value"},m(y))),l.a.createElement("div",{className:"metadata-item"},l.a.createElement("span",{className:"metadata-label"},"Last Event:"),l.a.createElement("span",{className:"metadata-value"},d(null===(e=a[a.length-1])||void 0===e?void 0:e.rawDateTime))))),l.a.createElement("div",{className:"sidebar-section"},l.a.createElement("div",{className:"sidebar-section-title"},"Tree Controls"),l.a.createElement("div",{className:"sidebar-buttons"},l.a.createElement("button",{className:"btn",onClick:()=>{x(new Set)}},l.a.createElement("span",{className:"btn-icon"},"\u25bc")," Collapse All Nodes"),l.a.createElement("button",{className:"btn",onClick:()=>{const e=new Set,t=a.reduce((e,a)=>a.duration>((null===e||void 0===e?void 0:e.duration)||0)?a:e,null);if(t){const a=t=>{var n;if(!(null===(n=t.children)||void 0===n?void 0:n.length))return;const l=t.children.reduce((e,a)=>a.duration>((null===e||void 0===e?void 0:e.duration)||0)?a:e,null);l&&(e.add(l.startSequence),a(l))};e.add(t.startSequence),a(t)}x(e)}},l.a.createElement("span",{role:"img","aria-label":"expand"},"\u25b6")," Expand Top Duration Paths"))),l.a.createElement("div",{className:"sidebar-section"},l.a.createElement("div",{className:"sidebar-section-title"},"Display Options"),l.a.createElement("div",{className:"threshold-control"},l.a.createElement("label",{className:"checkbox-label"},l.a.createElement("input",{type:"checkbox",checked:h,onChange:e=>v(e.target.checked)}),"Show only significant events"),h&&l.a.createElement("div",{className:"threshold-input"},l.a.createElement("label",null,"Threshold:"),l.a.createElement("input",{type:"number",min:"0",max:"100",step:"0.1",value:f,onChange:e=>b(Math.max(0,Math.min(100,parseFloat(e.target.value)||0)))}),l.a.createElement("span",null,"%")))),l.a.createElement("div",{className:"sidebar-footer"})),l.a.createElement("div",{className:`app ${a.length>0?"app-with-sidebar":""}`},!a.length&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Pega Tracer Event Performance Visualizer"),l.a.createElement("div",{className:"header-subtitle"},"Analyze and visualize Pega tracer events to identify performance bottlenecks"),l.a.createElement("div",{className:"info-panels"},l.a.createElement("div",{className:"info-panel"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"file"},"\ud83d\udcc4")," About Tracer Files"),l.a.createElement("p",null,"This tool analyzes Pega Tracer XML files, which contain detailed execution logs of your Pega application. These files can be exported from the Pega Platform's Tracer tool, which records step-by-step execution details of your application's processes."),l.a.createElement("a",{href:"https://docs.pega.com/bundle/platform-88/page/platform/app-dev/offline-debugging-tracerviewer.html",target:"_blank",rel:"noopener noreferrer",className:"learn-more-link"},"Learn more about Pega Tracer")),l.a.createElement("div",{className:"info-panel"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"steps"},"\ud83d\udd0d")," How It Works"),l.a.createElement("ol",{className:"steps-list"},l.a.createElement("li",null,l.a.createElement("strong",null,"Upload:")," Start by uploading your Pega Tracer XML file using the button below"),l.a.createElement("li",null,l.a.createElement("strong",null,"Analyze:")," The tool will process your file and generate an interactive visualization"),l.a.createElement("li",null,l.a.createElement("strong",null,"Explore:")," Navigate through the hierarchical tree view of your application's execution"))),l.a.createElement("div",{className:"info-panel"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"features"},"\u26a1")," Key Features"),l.a.createElement("ul",{className:"features-list"},l.a.createElement("li",null,"Hierarchical visualization of execution steps"),l.a.createElement("li",null,"Performance metrics for each operation"),l.a.createElement("li",null,"Identification of resource-intensive steps"),l.a.createElement("li",null,"Duration analysis with percentage breakdowns"),l.a.createElement("li",null,"Filtering options to focus on significant events")))),l.a.createElement("div",{className:"controls-section"},l.a.createElement("div",{className:"upload-section"},l.a.createElement("h2",{className:"upload-title"},"Please upload a Pega Tracer XML file to begin"),l.a.createElement("div",{className:"file-upload-group"},l.a.createElement("label",{className:"btn btn-upload"},l.a.createElement("input",{type:"file",accept:".xml",onChange:e=>((e,a)=>{const n=e.target.files[0];if(!n)return;E(!0),p(null),S(new Date);const l=new FileReader;l.onload=(e=>{try{const l=c(e.target.result);t(l),s(e.target.result),T(e=>({...e,tracer:!0}))}catch(n){console.error(`Error parsing ${a} file:`,n),p(`Error parsing ${a} file: `+n.message)}finally{E(!1)}}),l.onerror=(()=>{p(`Error reading ${a} file`),E(!1)}),l.readAsText(n)})(e,"tracer"),className:"file-input"}),l.a.createElement("span",{role:"img","aria-label":"folder"},"\ud83d\udcc1"),"Choose Tracer XML File",N.tracer&&l.a.createElement("span",{className:"file-uploaded"},"\u2713"))))),l.a.createElement("div",{className:"info-panels bottom-panels"},l.a.createElement("div",{className:"info-panel"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"security"},"\ud83d\udd12")," Secure & Private Analysis"),l.a.createElement("p",null,"All processing happens locally in your browser. No data is sent to any servers and no internet connection is required.")),l.a.createElement("div",{className:"info-panel"},l.a.createElement("h2",null,l.a.createElement("span",{role:"img","aria-label":"clipboard"},"\ud83d\udccb")," Supported Tracer Actions"),l.a.createElement("ul",{className:"features-list"},l.a.createElement("li",null,"Activities"),l.a.createElement("li",null,"Data Transforms"),l.a.createElement("li",null,"Data Pages"),l.a.createElement("li",null,"Stream Rules")),l.a.createElement("div",{className:"tip tip-text"},l.a.createElement("span",{role:"img","aria-label":"tip"},"\ud83d\udca1"),' Tip: Enable the "Abbreviate Events" option when capturing your tracer session to reduce the file size.')))),i&&l.a.createElement("div",{className:"error-message"},l.a.createElement("span",{role:"img","aria-label":"error"},"\u274c")," ",i),g&&l.a.createElement("div",{className:"loading-message"},"Loading..."),!a.length&&!i&&!g&&l.a.createElement("div",{className:"empty-state"},l.a.createElement("div",{className:"empty-state-info"})),l.a.createElement("div",{className:"chart"},h&&D.length>0&&l.a.createElement("div",{className:"hidden-events-notice"},D.length," root-level event",D.length>1?"s":""," hidden"),q.map((e,t)=>l.a.createElement(u,{key:e.activity,node:e,siblings:a,rootTotalDuration:M,hideMinorEvents:h,significanceThreshold:f,expandedNodes:w,setExpandedNodes:x}))),!a.length&&l.a.createElement("footer",{className:"footer"})))};s.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(p,null)))},3:function(e,a,t){e.exports=t(14)}},[[3,1,2]]]);
//# sourceMappingURL=main.5ada4df7.chunk.js.map